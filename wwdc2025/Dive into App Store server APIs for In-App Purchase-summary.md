**主题**：App Store服务器API针对应用内购买（In-App Purchase）的更新，致力于提升应用服务器的管理效率和用户体验。

**三大核心职责及更新**：
1. **管理应用内购买**：
  - **新功能**：引入**appTransactionId**，作为全局唯一标识符，用于关联客户账户与应用下载及购买，简化订阅管理和家庭共享交易的处理。
  - **改进**：新增“设置App Account Token”端点，支持应用外购买（如优惠码兑换）设置**appAccountToken**；“获取App Transaction Info”端点允许服务器直接获取应用下载信息，无需依赖设备。
  - **数据结构**：通过**JWSTransaction**、**JWSRenewalInfo**和**AppTransaction**管理交易数据，新增**offerPeriod**字段以支持优惠时长信息。

2. **签名请求**：
  - **统一格式**：所有签名请求采用JWS（JSON Web Signature）格式，简化促销优惠和入门优惠的签名流程。
  - **新功能**：支持为入门优惠设置自定义资格，增强开发者对优惠兑换的控制力。

3. **参与退款决策**：
  - **新端点**：推出“发送消费信息V2”，输入字段从12个减少到5个，支持所有产品类型（包括非消耗品和非续订订阅），新增按比例退款选项。
  - **改进**：通过**consumptionPercentage**和**refundPercentage**字段实现更精准的退款处理，提升客户满意度。

**其他亮点**：
- **App Store服务器库**：支持交易验证与解码，鼓励开发者参与开源社区贡献。
- **未来计划**：部分端点（如“获取App Transaction Info”和“发送消费信息V2”）将于2025年晚些时候上线。
- **资源建议**：推荐查看WWDC25和WWDC24相关会议，通过Feedback Assistant提交反馈。

**总结**：新API通过优化交易标识、签名流程和退款参与，显著提升了应用服务器的管理效率，为开发者提供了更灵活的工具来完善应用内购买体验。